<script>
// 初始化图表
const chartDomZ = document.getElementById('lineZ');
const myChartZ = echarts.init(chartDomZ);
var optionZ;

// 静态模拟数据
const staticData = {
	// X轴分组维度 - 部门
	categories: ['指挥中心', '政治处', '纪委', '纪工委', '督察大队','党委'],
	
	// 年龄分组数据 (左侧Y轴)
	// 每个部门对应的数据格式: [25岁及以下, 26-35岁, 36-45岁, 46岁及以上]
	ageData: [
		[35, 68, 22, 8],   // 指挥中心
		[28, 45, 18, 5],   // 政治处
		[22, 36, 25, 12],  // 纪委
		[18, 30, 22, 15],  // 纪工委
		[12, 25, 30, 18],  // 督察大队
		[30, 42, 15, 6],   // 党委
	],
	
	// 学历分组数据 (右侧Y轴)
	// 每个部门对应的数据格式: [大专及以下, 本科, 硕士及以上]
	educationData: [
		[15, 55, 40],  // 指挥中心
		[25, 60, 20],  // 政治处
		[40, 50, 15],  // 纪委
		[20, 65, 20],  // 纪工委
		[15, 70, 20],  // 督察大队
		[30, 55, 20],  // 党委
	]
};

// 初始化图表数据
function initChart() {
	const { categories, ageData, educationData } = staticData;
	
	optionZ = {
		title:{
			text:'',
			textStyle:{
				color:'#ffffff'
			},
		},
		tooltip: {
			trigger: 'axis',
			axisPointer: {
				type: 'shadow'
			},
			backgroundColor: 'rgba(255, 255, 255, 0.9)',
			borderColor: '#ddd',
			borderWidth: 1,
			textStyle: { color: '#333' },
			formatter: function(params) {
				let res = params[0].name + '<br/>';
				params.forEach(item => {
					res += item.marker + item.seriesName + ': ' + item.value + '<br/>';
				});
				return res;
			}
		},
		legend: {
			data: [
				'25岁及以下', '26-35岁', '36-45岁', '46岁及以上',
				'大专及以下', '本科', '硕士及以上'
			],
			top: 10,
			textStyle: { 
				fontSize: 10,
				color:'#ccc'
			},
			itemWidth: 12,
			itemHeight: 12,
			itemGap:20,
			formatter: function(name) {
				// 图例文字换行处理
				if (name.length > 5) {
					return name.substring(0, 5) + '\n' + name.substring(5);
				}
				return name;
			},
			tooltip: { show: true }
		},
		grid: {
			left: '5%',
			right: '5%',
			bottom: '7%',
			top: '30%',
			containLabel: true
		},
		xAxis: {
			type: 'category',
			data: categories,
			axisLabel: {
				interval: 0,
				rotate: 0,
				textStyle: { 
					fontSize: 11,
					color:'#ccc'
				 }
			}
		},
		// 左侧Y轴 - 年龄
		yAxis: [
			{
				type: 'value',
				name: '年龄分布',
				nameLocation: 'middle',
				nameGap: 30,
				nameTextStyle: { 
					fontWeight: 'bold',
					color:'#ccc'
				},
				axisLabel: {
					formatter: '{value}',
					textStyle: { 
						fontSize: 10,
						color:'#ccc'
					 }
				},
				splitLine: {
					lineStyle: { type: 'dashed' }
				}
			},
			// 右侧Y轴 - 学历
			{
				type: 'value',
				name: '学历分布',
				nameLocation: 'middle',
				nameGap: 40,
				nameTextStyle: { 
					fontWeight: 'bold',
					color:'#ccc'
				},
				axisLabel: {
					formatter: '{value}',
					textStyle: { 
						fontSize: 10,
						color:'#ccc'
					 }
				},
				splitLine: {
					show: false
				},
				position: 'right'
			}
		],
		series: [
			// 年龄相关系列 - 使用左侧Y轴
			{
				name: '25岁及以下',
				type: 'bar',
				data: ageData.map(item => item[0]),
				itemStyle: { color: '#165DFF' },
				yAxisIndex: 0,
				barWidth: '10%'
			},
			{
				name: '26-35岁',
				type: 'bar',
				data: ageData.map(item => item[1]),
				itemStyle: { color: '#69b1ff' },
				yAxisIndex: 0,
				barWidth: '10%'
			},
			{
				name: '36-45岁',
				type: 'bar',
				data: ageData.map(item => item[2]),
				itemStyle: { color: '#b3d1ff' },
				yAxisIndex: 0,
				barWidth: '10%'
			},
			{
				name: '46岁及以上',
				type: 'bar',
				data: ageData.map(item => item[3]),
				itemStyle: { color: '#e6f0ff' },
				yAxisIndex: 0,
				barWidth: '10%'
			},
			// 学历相关系列 - 使用右侧Y轴，使用折线图区分
			{
				name: '大专及以下',
				type: 'line',
				data: educationData.map(item => item[0]),
				itemStyle: { color: '#722ED1' },
				lineStyle: { color: '#722ED1' },
				symbol: 'circle',
				symbolSize: 8,
				yAxisIndex: 1
			},
			{
				name: '本科',
				type: 'line',
				data: educationData.map(item => item[1]),
				itemStyle: { color: '#EB0AA4' },
				lineStyle: { color: '#EB0AA4' },
				symbol: 'square',
				symbolSize: 8,
				yAxisIndex: 1
			},
			{
				name: '硕士及以上',
				type: 'line',
				data: educationData.map(item => item[2]),
				itemStyle: { color: '#FF7D00' },
				lineStyle: { color: '#FF7D00' },
				symbol: 'triangle',
				symbolSize: 8,
				yAxisIndex: 1
			}
		]
	};

	myChartZ.setOption(optionZ);
}
// 初始化图表
initChart();
</script>		