<script>
// 初始化图表
const chartDomZ = document.getElementById('lineZ');
const myChartZ = echarts.init(chartDomZ);
var optionZ;

// 静态模拟数据：近6个月（5-10月）申报数与风险排查处理率，包含关键节点备注
const staticData = {
    // X轴：近6个月
    categories: ['5月', '6月', '7月', '8月', '9月', '10月'],
    // 左Y轴数据：月度申报数（蓝色线）
    declarationData: [120, 150, 280, 220, 180, 240],
    // 右Y轴数据：风险排查处理率（绿色线，百分比）
    riskRateData: [0.85, 0.82, 0.78, 0.92, 0.65, 0.79],
    // 关键节点配置：标注需特殊说明的月份及原因
    keyPoints: [
        { month: '1月', reason: '1月申报激增：因春节困难补助申请' },
        { month: '3月', reason: '3月处理率下降：因排查量突增' },
        { month: '10月', reason: '10月申报增长：因季度末集中办理' }
    ]
};

// 初始化图表数据
function initChart() {
    const { categories, declarationData, riskRateData, keyPoints } = staticData;
    
    optionZ = {
        title: {
            text: '',
            textStyle: {
                color: '#ffffff',
				fontSize:14
            },
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'line'
            },
            backgroundColor: 'rgba(255, 255, 255, 0.9)',
            borderColor: '#ddd',
            borderWidth: 1,
            textStyle: { color: '#333' },
            formatter: function(params) {
                // 基础数据展示：月份、申报数、处理率
                let res = `${params[0].name}<br/>`;
                params.forEach(item => {
                    // 处理率显示为百分比
                    const value = item.seriesIndex === 1 ? 
                                  (item.value * 100).toFixed(1) + '%' : 
                                  item.value;
                    res += `${item.marker} ${item.seriesName}：${value}<br/>`;
                });
                // 匹配关键节点：若当前月份有备注，追加显示
                const keyPoint = keyPoints.find(p => p.month === params[0].name);
                if (keyPoint) {
                    res += `<br/><span style="color:#f5222d;">备注：${keyPoint.reason}</span>`;
                }
                return res;
            }
        },
        legend: {
            data: ['月度申报数', ''],
            top: 15,
            textStyle: {
                fontSize: 12,
                color: '#ccc'
            },
            itemWidth: 12,
            itemHeight: 12,
            itemGap: 20,
            tooltip: { show: true }
        },
        grid: {
            left: '7%',
            right: '7%',
            bottom: '3%',
            top: '30%',
            containLabel: true
        },
        xAxis: {
            type: 'category',
            data: categories,
            axisLabel: {
                interval: 0,
                rotate: 0,
                textStyle: {
                    fontSize: 12,
                    color: '#ccc'
                }
            },
            axisLine: {
                lineStyle: { color: '#ccc' }
            }
        },
        // 双Y轴配置
        yAxis: [
            // 左Y轴：月度申报数（蓝色）
            {
                type: 'value',
                name: '月度申报数',
                nameLocation: 'middle',
                nameGap: 40,
                nameTextStyle: {
                    fontWeight: 'bold',
                    color: '#1E90FF' // 蓝色
                },
                axisLabel: {
                    formatter: '{value}',
                    textStyle: {
                        fontSize: 12,
                        color: '#ccc'
                    }
                },
                splitLine: {
                    lineStyle: { type: 'dashed', color: 'rgba(204,204,204,0.3)' }
                },
                axisLine: {
                    lineStyle: { color: '#1E90FF' }
                }
            },

        ],
        series: [
            // 左Y轴系列：月度申报数（蓝色线）
            {
                name: '月度申报数',
                type: 'line',
                data: declarationData,
                itemStyle: { color: '#1E90FF' }, // 蓝色
                lineStyle: { 
                    color: '#1E90FF',
                    width: 3
                },
                symbol: 'circle',
                symbolSize: 8,
                emphasis: {
                    symbolSize: 12,
                    itemStyle: { color: '#ffffff', borderColor: '#1E90FF', borderWidth: 2 }
                },
                yAxisIndex: 0 // 绑定左Y轴
            },

        ]
    };

    myChartZ.setOption(optionZ);
}

// 初始化图表
initChart();
</script>		